"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[616],{3616:(g,p,i)=>{i.r(p),i.d(p,{CashComponent:()=>y});var m=i(6814),r=i(95),t=i(4769),h=i(1120),f=i(5371),u=i(2425);function v(e,_){1&e&&(t.TgZ(0,"p"),t._uU(1,"Address Is Requierd"),t.qZA())}function a(e,_){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,v,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let s;t.xp6(1),t.Q6J("ngIf",null==(s=n.paymentForm.get("details"))||null==s.errors?null:s.errors.required)}}function l(e,_){1&e&&(t.TgZ(0,"p"),t._uU(1,"City Is Requierd"),t.qZA())}function I(e,_){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,l,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let s;t.xp6(1),t.Q6J("ngIf",null==(s=n.paymentForm.get("city"))||null==s.errors?null:s.errors.required)}}function U(e,_){1&e&&(t.TgZ(0,"p"),t._uU(1,"Phone Is Requierd"),t.qZA())}function T(e,_){1&e&&(t.TgZ(0,"p"),t._uU(1,"Enter Valid Phone Number"),t.qZA())}function A(e,_){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,U,2,0,"p",12),t.YNc(2,T,2,0,"p",12),t.qZA()),2&e){const n=t.oxw();let s,o;t.xp6(1),t.Q6J("ngIf",null==(s=n.paymentForm.get("phone"))||null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=n.paymentForm.get("phone"))||null==o.errors?null:o.errors.pattern)}}function Z(e,_){1&e&&t._UZ(0,"i",13)}let y=(()=>{class e{constructor(n,s,o,c){this._ActivatedRoute=n,this._CartService=s,this._ToastrService=o,this._Router=c,this.cartId="",this.checkCorrectData=!1,this.paymentForm=new r.cw({details:new r.NI(null,[r.kI.required]),phone:new r.NI(null,[r.kI.required,r.kI.pattern(/^(01)[0125][0-9]{8}/)]),city:new r.NI(null,[r.kI.required])})}ngOnInit(){this._ActivatedRoute.params.subscribe({next:n=>{this.cartId=n.id},error:n=>{console.log(n)}})}submit(){this.checkCorrectData=!0,this._CartService.cashPayment(this.cartId,this.paymentForm.value).subscribe({next:n=>{console.log(n),"success"==n.status&&(this._ToastrService.success("Your Order Is Under Processing"),this._CartService.cartNumber.next(0),this._Router.navigate(["/allorders"]))},error:n=>{console.log(n)}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(h.gz),t.Y36(f.N),t.Y36(u._W),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cash"]],standalone:!0,features:[t.jDz],decls:23,vars:6,consts:[[1,"shadow","rounded","p-4","my-4","bg-main-light"],[1,"w-75","mx-auto","py-5"],[1,"text-main"],[3,"formGroup","submit"],[1,"mb-3"],["formControlName","details",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["formControlName","city",1,"form-control"],["formControlName","phone",1,"form-control"],["type","submit",1,"main-btn","text-white","d-block","ms-auto","p-2",3,"disabled"],["class","fa-solid fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(s,o){if(1&s&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h3",2),t._uU(3,"Check Out:"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("submit",function(){return o.submit()}),t.TgZ(5,"div",4)(6,"label"),t._uU(7,"Address :"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,a,2,1,"div",6),t.qZA(),t.TgZ(10,"div",4)(11,"label"),t._uU(12,"City :"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,I,2,1,"div",6),t.qZA(),t.TgZ(15,"div",4)(16,"label"),t._uU(17,"Phone :"),t.qZA(),t._UZ(18,"input",8),t.YNc(19,A,3,2,"div",6),t.qZA(),t.TgZ(20,"button",9),t._uU(21,"Pay "),t.YNc(22,Z,1,0,"i",10),t.qZA()()()()),2&s){let c,d,C;t.xp6(4),t.Q6J("formGroup",o.paymentForm),t.xp6(5),t.Q6J("ngIf",(null==(c=o.paymentForm.get("details"))?null:c.errors)&&(null==(c=o.paymentForm.get("details"))?null:c.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=o.paymentForm.get("city"))?null:d.errors)&&(null==(d=o.paymentForm.get("city"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(C=o.paymentForm.get("phone"))?null:C.errors)&&(null==(C=o.paymentForm.get("phone"))?null:C.touched)),t.xp6(1),t.Q6J("disabled",o.paymentForm.invalid),t.xp6(2),t.Q6J("ngIf",o.checkCorrectData)}},dependencies:[m.ez,m.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return e})()},5371:(g,p,i)=>{i.d(p,{N:()=>f});var m=i(5619),r=i(4769),t=i(9862),h=i(1378);let f=(()=>{class u{constructor(a,l){this._HttpClient=a,this._AuthService=l,this.baseUrl="https://ecommerce.routemisr.com",this.cartNumber=new m.X(0),this.userId=this._AuthService.userId}addProduct(a){return this._HttpClient.post(`${this.baseUrl}/api/v1/cart`,{productId:a})}updateCart(a,l){return this._HttpClient.put(`${this.baseUrl}/api/v1/cart/${a}`,{count:l})}getUserCart(){return this._HttpClient.get(`${this.baseUrl}/api/v1/cart`)}rmoveSpecificItem(a){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart/${a}`)}clearCart(){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart`)}checkOutSession(a,l){return this._HttpClient.post(`${this.baseUrl}/api/v1/orders/checkout-session/${a}?url=http://localhost:4200`,{shippingAddress:l})}cashPayment(a,l){return this._HttpClient.post(`${this.baseUrl}/api/v1/orders/${a}`,{shippingAddress:l})}getAllUserOrders(){return this._HttpClient.get(`${this.baseUrl}/api/v1/orders/user/${this.userId}`)}static#t=this.\u0275fac=function(l){return new(l||u)(r.LFG(t.eN),r.LFG(h.e))};static#e=this.\u0275prov=r.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);