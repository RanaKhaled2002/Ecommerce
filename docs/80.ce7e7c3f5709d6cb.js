"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[80],{5080:(C,u,e)=>{e.r(u),e.d(u,{WishlistComponent:()=>c});var _=e(6814),t=e(4769),p=e(8777),m=e(5371),l=e(2425);function d(n,v){if(1&n){const s=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.qZA(),t.TgZ(3,"div",5)(4,"h1",7),t._uU(5),t.qZA(),t.TgZ(6,"p",8),t._uU(7),t.qZA(),t.TgZ(8,"span",9),t.NdJ("click",function(){const a=t.CHM(s).$implicit,g=t.oxw(2);return t.KtG(g.removeFromWishList(a._id))}),t._UZ(9,"i",10),t._uU(10," Delete"),t.qZA()(),t.TgZ(11,"div",5)(12,"button",11,12),t.NdJ("click",function(){const a=t.CHM(s).$implicit,g=t.MAs(13),W=t.oxw(2);return t.KtG(W.addProduct(a._id,g))}),t._uU(14,"Add To Cart"),t.qZA()()()}if(2&n){const s=v.$implicit;t.xp6(2),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(3),t.Oqu(s.title),t.xp6(2),t.Oqu(s.price)}}function h(n,v){if(1&n&&(t.TgZ(0,"section")(1,"h1",2),t._uU(2,"My Wish List"),t.qZA(),t.YNc(3,d,15,4,"div",3),t.qZA()),2&n){const s=t.oxw();t.xp6(3),t.Q6J("ngForOf",s.allProduct)}}function r(n,v){1&n&&(t.TgZ(0,"h2",13),t._uU(1,"Wish List Is Empty..."),t.qZA())}let c=(()=>{class n{constructor(s,i,o,a){this._WishlistService=s,this._CartService=i,this._Renderer2=o,this._ToastrService=a,this.allProduct=[],this.wishlist=null}ngOnInit(){this._WishlistService.getUserWishlist().subscribe({next:s=>{if(0==s.count)this.wishlist=null;else{this.allProduct=s.data;const i=s.data.map(o=>o._id);this.wishlist=i,this._WishlistService.wishlistNumber.next(s.data.length)}},error:s=>{console.log(s)}})}addProduct(s,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addProduct(s).subscribe({next:o=>{this._ToastrService.success(o.message),this._Renderer2.removeAttribute(i,"disabled"),this._CartService.cartNumber.next(o.numOfCartItems),this.removeFromWishList(s)},error:o=>{console.log(o),this._Renderer2.removeAttribute(i,"diabled")}})}addToWishlist(s){this._WishlistService.addToWishlist(s).subscribe({next:i=>{this.wishlist=i.data,this._ToastrService.success(i.message),console.log(i.data.length),this._WishlistService.wishlistNumber.next(i.data.length)},error:i=>{console.log(i)}})}removeFromWishList(s){this._WishlistService.deleteProductFromWishlist(s).subscribe({next:i=>{this.wishlist=i.data,this._ToastrService.success(i.message);const o=this.allProduct?.filter(a=>this.wishlist?.includes(a._id));this.allProduct=o,this._WishlistService.wishlistNumber.next(i.data.length),0==this.allProduct?.length&&(this.wishlist=null)},error:i=>{console.log(i)}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.M),t.Y36(m.N),t.Y36(t.Qsj),t.Y36(l._W))};static#s=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["msg",""],[1,"text-main","text-center"],["class","row py-5 align-items-center border-bottom shadow my-4 g-3",4,"ngFor","ngForOf"],[1,"row","py-5","align-items-center","border-bottom","shadow","my-4","g-3"],[1,"col-md-4"],[1,"w-75",3,"src","alt"],[1,"h5","fw-bold"],[1,"text-main"],["role","button",1,"text-danger",3,"click"],[1,"fa-solid","fa-trash"],[1,"main-btn","w-100","text-white","py-2","mt-2",3,"click"],["btnAdd",""],[1,"text-center","text-main"]],template:function(i,o){if(1&i&&(t.YNc(0,h,4,1,"section",0),t.YNc(1,r,2,0,"ng-template",null,1,t.W1O)),2&i){const a=t.MAs(2);t.Q6J("ngIf",o.wishlist)("ngIfElse",a)}},dependencies:[_.ez,_.sg,_.O5]})}return n})()},5371:(C,u,e)=>{e.d(u,{N:()=>l});var _=e(5619),t=e(4769),p=e(9862),m=e(1378);let l=(()=>{class d{constructor(r,c){this._HttpClient=r,this._AuthService=c,this.baseUrl="https://ecommerce.routemisr.com",this.cartNumber=new _.X(0),this.userId=this._AuthService.userId}addProduct(r){return this._HttpClient.post(`${this.baseUrl}/api/v1/cart`,{productId:r})}updateCart(r,c){return this._HttpClient.put(`${this.baseUrl}/api/v1/cart/${r}`,{count:c})}getUserCart(){return this._HttpClient.get(`${this.baseUrl}/api/v1/cart`)}rmoveSpecificItem(r){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart/${r}`)}clearCart(){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart`)}checkOutSession(r,c){return this._HttpClient.post(`${this.baseUrl}/api/v1/orders/checkout-session/${r}?url=http://localhost:4200`,{shippingAddress:c})}cashPayment(r,c){return this._HttpClient.post(`${this.baseUrl}/api/v1/orders/${r}`,{shippingAddress:c})}getAllUserOrders(){return this._HttpClient.get(`${this.baseUrl}/api/v1/orders/user/${this.userId}`)}static#t=this.\u0275fac=function(c){return new(c||d)(t.LFG(p.eN),t.LFG(m.e))};static#s=this.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},8777:(C,u,e)=>{e.d(u,{M:()=>m});var _=e(5619),t=e(4769),p=e(9862);let m=(()=>{class l{constructor(h){this._HttpClient=h,this.baseUrl="https://ecommerce.routemisr.com",this.wishlistNumber=new _.X(0)}addToWishlist(h){return this._HttpClient.post(`${this.baseUrl}/api/v1/wishlist`,{productId:h})}getUserWishlist(){return this._HttpClient.get(`${this.baseUrl}/api/v1/wishlist`)}deleteProductFromWishlist(h){return this._HttpClient.delete(`${this.baseUrl}/api/v1/wishlist/${h}`)}static#t=this.\u0275fac=function(r){return new(r||l)(t.LFG(p.eN))};static#s=this.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);